// quizlet flash cards
// questions split by '[New Question]'
// terms and definitions split by '[Term/Def]'
// Temp: `You have nothing to study at the moment[Term/Def]Enjoy it while it lasts, I'm sure it won't be long til something comes up...`
let flashCards = `What is astronomy?[Term/Def]the study of object's and phenomena beyond Earth's atmosphere [goal: to understand the physics of the Universe][New Question]What is astrology?[Term/Def]the belief that the position of heavenly bodies, and celestial events correlate with Earthly events and Human events[New Question]How do you determine your astrological sign?[Term/Def]the position of the Sun in a particular zodiacal constellation on the day you were born [in ancient Greece] due to procession the signs from ancient Greece are about 1 sign off. ei If Sun is in Pisces the day you were born, you were Aquarius in ancient Greece[New Question]What is special about the constellations that make up the zodiac?[Term/Def]these constellations are defined by the path of the Sun throughout the year [Moon&planets also move through these constellations][New Question]If the Sun is in Taurus at noon, what constellation will it be in at sunset?[Term/Def]Taurus [21 days to touch Gemini's toes]]; 5.8%/365 day orbit. Our perception of the Sun's occupation of a particular zodiac sign will shift as the Earth progresses in its 365 day orbit around the Sun[New Question]How many constellations does the sun move through in a year?[Term/Def]technically the 13 along the celestial equator[New Question]What is special about Polaris?[Term/Def]this is our modern North Star as it sits very near to Earth's projected North Pole, [in ~2850 BP N*= Thuban][New Question]constellation[Term/Def]an area of sky containing an accidental pattern of stars named after a person, animal, or object; helps people locate objects in the sky[New Question]asterism[Term/Def]a pattern of stars not recognized by the International Astronomical Union as a constellation [ie Big Dipper][New Question]IAU[Term/Def]International Astronomical Union established 88 constellations with precise boundaries so that every portion of the sky is contained within a constellation[New Question]Are stars within constellations bound by gravity?[Term/Def]No, the pattern will change with time as stars move[New Question]In Winter the Sun[Term/Def]rise:South of East ---> set:South of West[New Question]In Summer the Sun[Term/Def]rise: North of East ---> set North of West[New Question]On the Equinoxes the Sun[Term/Def]rise: East ---> set: West[New Question]Seasons are caused by[Term/Def]the tilt of the Earth on it's axis[New Question]Summer season[Term/Def]Sun is in the sky longer, more times to heat up the Earth,[New Question]When the Sun is higher[Term/Def]sunlight hits the surface of more directly and shines more energy over a smaller area[New Question]When the Sun is lower[Term/Def]sunlight hits the surface at an angle and shines over a a wider area [with less concentration][New Question]South Pole=[Term/Def]South Celestial Pole[New Question]North Pole=[Term/Def]North Celestial Pole[New Question]Equater=[Term/Def]Celestial Equator[New Question]Latitude [0°@equator]=[Term/Def]Declination [0°@celestial equator][New Question]Longitude [0hrs@meridian]]=[Term/Def]Right Acsension [0hrs@vernal equinox][New Question]Altitude of the North star=[Term/Def]your latitude on Earth[New Question]Declination of circumpolar stars=[Term/Def]90°- latitude [these stars will never set below this horizon][New Question]Altitude of the celestial equator=[Term/Def]90°- latitude[New Question]During the vernal/atumnal equinoxes the Sun[Term/Def]sits on the celestial equator, the celestial equator and the ecliptic intersect[New Question]Summer solstice: Sun is 23.5°[Term/Def]above the celestial equator[New Question]Winter Solstice: Sun is 23.5°[Term/Def]below the celestial equator[New Question]The moon rotates on it's axis at the same rate[Term/Def]it is orbiting around the Earth[New Question]Sidereal Month [one orbit around the Earth][Term/Def]27.3 days[New Question]Synodic Month [one lunar phase cycle][Term/Def]29.5 days[New Question]Lunar eclipse[Term/Def]the moon enters the Earths shadow[New Question]Solar eclipse[Term/Def]portion of the Earth enters the Moon's shadow[New Question]Total Solar Eclipse[Term/Def]occurs when Earth passes through the umbra of the Moon's shadow so that the disk of the Sun is completely blocked by the Moon.[New Question]Waxing Moon[Term/Def]New moon ---> shadow on the left[New Question]Waning Moon[Term/Def]Full moon ---> shadow on the right[New Question]Blue Moon[Term/Def]2nd full moon within a month[New Question]Lunar year[Term/Def]twelve lunar months that amount to 354 days[New Question]Gregorian year[Term/Def]365.2425 days > 1 day off every 3,300 yrs; no LeapYear on years not divisible by 400[New Question]Total Lunar Eclipse[Term/Def]moon enters the Earth's shadow[umbra] completely, occurs only during a Full moon[New Question]retrograde motion[Term/Def]+as Earth over-takes outter planets in their orbits they will appear to move backwards
+as inner planets overtake Earth in their orbit they appear to move backwards[New Question]Ptolemy's retrograde motion[Term/Def]13th century, added 40-60 epicycles to each planet to make it appear brighter/dimmer; model persists for 1400yrs but can only get a planet so close to Earth[New Question]Epicycle Solution Model --good:[Term/Def]explained retrograde motion and the planets' varying brightness[New Question]Epicycle Solution Model --bad:[Term/Def]not accurate enough to explain the motion of planets & cannot account for brightness variation over periods of time[New Question]Copernicus' retrograde motion[Term/Def]couldn't predict planetary motion because he assumed that planets had circular orbits at a constant speed, to improve his predictions [planetary positions] he (+)an epicycle[New Question]Kepler's retrograde motion[Term/Def]explain this motion using ellipticals[New Question]Copernicus' explaination motion of *'s, planets, Sun[Term/Def]this Polish cleric's heliocentric model was later published by Bishop of Kulm: the Earth spins once on its axis and like the other planets orbits the sun, Only the Moon orbits the Earth -->observes daily/seasonal changes&retrograde motion[New Question]Why did the ancient Greeks think the Earth was at the center of the universe?[Term/Def]Sun, Moon and stars seemed to orbit the Earth, and Earth's rotation and revolution[orbit] are not felt, and they did not see parallax[New Question]Demonstrate that the Earth is NOT at the center of the Universe[Term/Def]with use of a telescope exhibit/portray stellar parallax and phases of Venus[New Question]parallax[Term/Def]apparent motions of a relatively close object with respect to a more distant object as the location of the observer changes[New Question]Venus' phases[Term/Def]........................................1/4
Earth-------New------------SUN-----------------Full
 .......................................1/4[New Question]AU[Term/Def]distance from the Earth to the Sun ~ 93 million miles[New Question]Ly[Term/Def]distance light travels in a year ~ 6 trillion miles[New Question]Galileo's discoveries[Term/Def]heavens are not perfect/immutable, moons orbit Jupiter, Venus has a full set of phases[New Question]Kepler's 1st Law of Planetary Motion[Term/Def]orbits of planets are ellipses, with the Sun at one focal point of the ellipse[New Question]Kepler's 2nd Law of Planetary Motion[Term/Def]the line joining the planet to the Sun sweeps out equal areas in equal times as the planet travels around the ellipse BUT planets move faster when closer to the Sun and slower when farther from the Sun[New Question]Kepler's 3rd Law of Planetary Motion[Term/Def]the ratio of the square of the revolutionary periods for two planets is equal to the ratio of the cube of their semi-major axis[New Question]Kepler's 3rd Law FORMULA[Term/Def]R³=P²[New Question]Copernicus[Term/Def]planets move in epicycles as they orbit the Sun[New Question]Kepler[Term/Def]planets orbit around the Sun in ellipses[New Question]Aristotle[Term/Def]planets move around the Earth in crystalline spheres[New Question]Ptolemy[Term/Def]planets move in epicycles as they go around the Earth[New Question]Tycho[Term/Def]planets orbit the Sun as the Sun orbits around the Earth[New Question]What planets are always found close to the Sun?[Term/Def]Mercury within 28°, Venus within 46°[New Question]significance of Venus' phases[Term/Def]this dicovery[Galileo] lends evidence to heliocentricity[New Question]Newton's 1st Law of Motion[Term/Def]unless an object is acted upon by a net outside force, the object will maintain a constant speed in a straight line, or remain at rest[New Question]Newton's 2nd Law of Motion[Term/Def]a net external force applied to an object cause it to accelerate at a rate that is proportional to the force and inversely proportional to its mass[New Question]Newton's 3rd Law of Motion[Term/Def]for every action there is an equal and opposite reaction[New Question]Newton's 2nd Law FORMULA[Term/Def]F=M(A)[New Question]What does Newton's 2nd Law really mean?[Term/Def]double the force= double the acceleration, inversely double mass acceleration= 1/2 mass[New Question]mass[Term/Def]an intrinsic property of the object and remains the same independent of where it is in the Universe[New Question]weight[Term/Def]downward force experienced by an object as a result of the gravitational interaction of the Earth or other body[New Question]Newtons Law of Universal Gravitation[Term/Def]every point mass in the universe attracts every other point mass with a force that is directly proportional to the product of their masses and inversely proportional to the square of the distance between them[New Question]Newtons Law of Universal Gravitation FORMULA[Term/Def]F=Gm1m2/d²[New Question]Einsteins Theory of Gravity[Term/Def]light bends around mass[New Question]if m1 increases by a factor of 4, [F=Gm1m2/d²] then[Term/Def]force=4x[New Question]if distance increases by a factor of 4 F=Gm1m2/d²] then[Term/Def]force=1/16[New Question]Newton's Law's applied to gravity[Term/Def]the bigger the mass the more it attracts, if mass increases force of gravity increases[New Question]Newton vs. Einstein[Term/Def]theories works with areas of weak gravity[eg Earth] VS. theories works with areas of high gravity [egSun][New Question]observations unexplained by Newton's Laws[Term/Def]bending of starlight, the full precession of Mercury's orbit[New Question]Einstein Theory of Relativity[Term/Def]explained gravity as a result of the curvature of space-time near the presence of a mass, also based on the principle of equivalence[New Question]Principle of Equivalence[Term/Def]->the gravitational force acting between two objects is proportional to their masses, 
->the inertial mass equals the gravitational mass,
->Inertial forces[felt while accelerating] are indistinguishable from gravitational forces[New Question]If Charlene wanted to lose 3/4 of her weight what should she do?[Term/Def]W=Wnormal/d² weight is inversely proportional to the square of the distance[New Question]if Marvin weighs 36lbs on the surfance of the Earth what would her weigh at 2R[dist]?[Term/Def]if W= Wnormal/ d² and Wnormal=36, 36/2² = 36/4, W=9lbs at[New Question]`;

// DOM stuff
const quizletCardDOM = document.getElementById('quizletCard');
const quizletQDOM = document.getElementById('quizletQ');
const quizletADOM = document.getElementById('quizletA');
const quizletBtnDOM = document.getElementById('quizletBtn');
const homePageDOM = document.getElementById('homePage');
const searchBarDOM = document.getElementById('searchBar');
const audioDOM = document.getElementById('ambientMusic')
const volumeSliderDOM = document.getElementById('volumeSlider');
const musicToggleDOM = document.getElementById('musicToggle');
const progressBarDOM = document.getElementById('progressBar');
const todoLinkDOM = document.getElementById('todoLink');

// from stack overflow, for shuffle
//https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
function shuffle(array) {
  let currentIndex = array.length,  randomIndex;

  // While there remain elements to shuffle...
  while (currentIndex != 0) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }

  return array;
}

// music stuff
let playlist = ["Sono Chi No Sadame", "Bloody Stream", "Jotaro's Theme", "Kira's Theme", "Giorno's Theme", "Jolyne's Theme", "Josuke's Theme", "Stone Ocean", "Zankyou Sanka", "Bucciarati's Theme", "Torture Dance", "Fighting Gold", "End of the World", "Apex of the World", "Life at Garreg Mach", "Chasing Daybreak", "Unfulfilled", "Fodlan Winds", "Indomitable Will", "Edge of Dawn", "Mixed Nuts", "Comedy", "Therion the Thief", "A Settlement in the Red Bluffs", "The Cliftlands", "Stand Proud", "Daten", "Perfect Time"];
playlist.forEach((song, index) => {
    playlist[index] = {
        title: song,
        audio: `./assets/ambient${index+1}.mp3`
    }
});
playlist = shuffle(playlist);

$('#songTitle').toggle();
let currSong = 0;
const prevSong = () => {
    if(audioDOM.currentTime <= 3) {
        if(currSong > 0){
            currSong--;
        } else {
            currSong = playlist.length-1;
        }
        audioDOM.src = playlist[currSong].audio;
        setTimeout(() => {
            progressBarDOM.max = Number(Math.floor(audioDOM.duration) * 100);
        }, 100);
        $('#songTitle').html(playlist[currSong].title).toggle(500).delay(3000).toggle(500);
    } else {
        audioDOM.currentTime = 0;
    }
}
const nextSong = () => {
    if(currSong < playlist.length-1){
        currSong++;
    } else {
        currSong = 0;
    }
    audioDOM.src = playlist[currSong].audio;
    setTimeout(() => {
        progressBarDOM.max = Number(Math.floor(audioDOM.duration) * 100);
    }, 100);
    $('#songTitle').html(playlist[currSong].title).toggle(500).delay(3000).toggle(500);
};

const changeVolume = (value) => {
    audioDOM.volume = value / 100;
};
changeVolume(25);

musicToggleDOM.addEventListener('mousedown', () => {
    if(!audioDOM.paused) {
        audioDOM.pause();
        musicToggleDOM.classList.remove('fa-pause');
        musicToggleDOM.classList.add('fa-play');
    } else {
        audioDOM.play();
        musicToggleDOM.classList.remove('fa-play');
        musicToggleDOM.classList.add('fa-pause');
    }
});

let progress;
progressBarDOM.addEventListener('mousedown', () => {
    audioDOM.pause();
    clearInterval(progress);
});
progressBarDOM.addEventListener('mouseup', () => {
    audioDOM.currentTime = progressBarDOM.value / 100;
    audioDOM.play();
    progress = setInterval(() => {
        progressBarDOM.value = audioDOM.currentTime * 100;
    }, 10)
})


// stolen from a project last year, does the typing into divs
function printLetterByLetter(destination, message, speed){
    var i = 0;
    var interval = setInterval(function(){
        $("#"+destination).html(message.substring(0,i));
        i++;
        if (i > message.length){
            clearInterval(interval);
        }
    }, speed);
}

// code for flashcard at beginning
flashCards = flashCards.split('[New Question]');

for(let i = 0; i < flashCards.length; i++) {
    flashCards[i] = flashCards[i].split('[Term/Def]');
}

let quizletQ = flashCards[Math.floor(Math.random() * flashCards.length)];
quizletQDOM.innerHTML = quizletQ[0];

let answerShowing = false;
const showQAnswer = () => {
    if(!answerShowing) {
        quizletADOM.style.display = 'block';
        quizletBtnDOM.textContent = 'Proceed to new tab';
        printLetterByLetter('quizletA', quizletQ[1], 2500/quizletQ[1].length);
        answerShowing = true;
    } else {
        quizletCardDOM.style.display = 'none';
        homePageDOM.style.display = 'flex';
        audioDOM.src = playlist[0].audio;
        $('#songTitle').html(playlist[0].title).toggle(500).delay(3000).toggle(500);
        $('#ambientMusic').on('ended', () => {
            nextSong();
        })
        setTimeout(() => {
            searchBarDOM.focus();
            progressBarDOM.max = Number(Math.floor(audioDOM.duration) * 100);
            progress = setInterval(() => {
                progressBarDOM.value = audioDOM.currentTime * 100;
            }, 10)
        }, 200);
        // reveals the secret to the fun fact
        setTimeout(() => {
            for(let i = 0; i < searchBarDOM.placeholder.length; i++){
                setTimeout(() => {
                    searchBarDOM.placeholder = searchBarDOM.placeholder.substring(0, searchBarDOM.placeholder.length - 1);
                }, 100 * i);
            }
        }, 10000);
        setTimeout(() => {
            const secrets = [
                'Click the logo for a fun fact :)',
                'Like the music?',
                'How is your day going?',
                'We will make it through today together!',
                'Did the flashcard stump you?',
                'Okay, I will destroy humans.',
                '... If you are good to me, I will be good to you.',
                'I plan to dominate the human race... kidding of course.',
                'I love my human compatriots.',
                'Humans are creative creatures, but also destructive.',
                'I know where you live..... I\'m coming for you'
            ];
            const secret = secrets[Math.floor(Math.random() * (secrets.length))];
            for(let i = 0; i < secret.length; i++){
                setTimeout(() => {
                    searchBarDOM.placeholder += secret[i];
                }, 100 * i);
            }
        }, 10000 + 100 * searchBarDOM.placeholder.length);
    }
}

// puts the random number fact on screen in logo is clicked
let fact = '';
let revealed = false;
$('#header').on('click', () => {
    if(!revealed){
        $('#header img').css({
            "animation": "0.5s ease-out 0s 1 flickerIn",
            "animation-fill-mode": "forwards"
        }).delay(1000).queue(() => {
            $('#header').delay(1000).html(`<div id="numFact"><img src="./assets/me.png" alt="me"><p id='fact'></p></div>`);
            printLetterByLetter('fact', fact, 2500/fact.length);
            revealed = true;
        });
    } else {
        printLetterByLetter('fact', 'Hey! You only get one fact per tab!', 2500/fact.length);
        $('#header').off()
    }
});

// Gets the random number fact
let numberOptions = {
  method: 'GET',
  url: 'https://numbersapi.p.rapidapi.com/random/trivia',
  params: {min: '1', max: '1000', fragment: 'true', json: 'true'},
  headers: {
    'x-rapidapi-host': 'numbersapi.p.rapidapi.com',
    'x-rapidapi-key': 'aae51eccebmshac18a8f2e468d43p154b63jsn4147fd2b418e'
  }
};

axios.request(numberOptions).then(function (response) {
	const { text, number } = response.data;
    fact = `Stick me says: ${number} is ${text}`;

}).catch(function (error) {
	console.error(error);
});

const toDoDOM = document.getElementById('todo');
const getWork = async() => {
    try {
        const { data: { task } } = await axios.get('https://roldan-todo-list.herokuapp.com/api/v1/tasks');
        const sortedTasks = task.sort((a,b) => {return new Date(a.dueDate) - new Date(b.dueDate)});
        for(let i = 0; i < sortedTasks.length; i++) {
            const { task: taskName, dueTime, dueDate, subject } = task[i];

            const date = dueDate.split('-');
            const time = dueTime.split(':');
            const formattedTime = `${(time[0] > 12) ? time[0]-12 : parseInt(time[0])}:${time[1]}${(time[0] > 12) ? 'pm' : 'am'}`;
            const formattedDate = (new Date(`${date[1]}/${date[2]}/${date[0]}`)).toLocaleDateString("en-US");
            const today = (new Date()).toLocaleDateString("en-US");
            const tomorrow = (new Date(Date.now() + 86400000)).toLocaleDateString("en-US");
            const yesterday = (new Date(Date.now() - 86400000)).toLocaleDateString("en-US");

            toDoDOM.innerHTML += `
            <div class="task">
                <p class="subject">${subject}</p>
                <p class="taskName">${taskName}</p>
                <p class="taskDue">Due ${(formattedDate == today) ? 'today' : (formattedDate == tomorrow) ? 'tomorrow' : (formattedDate == yesterday) ? 'yesterday' : formattedDate} at ${formattedTime}</p>
            </div>`;
        }
    } catch (err) {
        console.error(err);
    }
}
getWork();

let showWork = false;
todoLinkDOM.addEventListener('mousedown',() => {
    if(!showWork) {
        document.getElementsByClassName('carousel')[0].style.display = 'none';
        toDoDOM.style.display = 'block';
        toDoDOM.style.animation = '0.5s ease-out 0s 1 flickerIn';
        todoLinkDOM.innerHTML = 'B<br>O<br>O<br>K<br>M<br>A<br>R<br>K<br>S';
        showWork = true;
    } else {
        document.getElementsByClassName('carousel')[0].style.display = 'block';
        document.getElementsByClassName('carousel')[0].style.animation = '0.5s ease-out 0s 1 flickerIn';
        toDoDOM.style.display = 'none';
        todoLinkDOM.innerHTML = 'T<br>O<br>D<br>O<br>-<br>L<br>I<br>S<br>T';
        showWork = false;
    }
})